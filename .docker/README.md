# APR + è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ çµ±åˆç’°å¢ƒ

æ—¢å­˜ã®APRã‚·ã‚¹ãƒ†ãƒ ï¼ˆdev + grpc-analyzer-nodeï¼‰ã«è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã‚’è¿½åŠ ã—ãŸDockerç’°å¢ƒã§ã™ã€‚

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   dev ã‚³ãƒ³ãƒ†ãƒŠ       â”‚    â”‚ evaluation-system   â”‚
â”‚  (é–‹ç™ºç’°å¢ƒ)          â”‚    â”‚   (è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ )     â”‚
â”‚                     â”‚    â”‚    (Python)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚ grpc-analyzer-node  â”‚              â”‚
â”‚ (æœ¬ç•ªå®Ÿé¨“ç”¨ç’°å¢ƒ)     â”‚              â”‚
â”‚ â€¢ å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ ãƒ•ãƒ«ãƒ‘ã‚¹ãƒã‚¤ãƒ³ãƒ‰   â”‚
â”‚ â€¢ Node.js/TypeScriptâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…±æœ‰ãƒ‡ãƒ¼ã‚¿:
â€¢ dataset/ (èª­ã¿å–ã‚Šå°‚ç”¨ â†’ è©•ä¾¡)
â€¢ log/ (grpc-analyzer-node â†’ è©•ä¾¡)
â€¢ output/ (grpc-analyzer-node â†’ è©•ä¾¡)
```

## ğŸ³ ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ

### dev
- **ç”¨é€”**: é–‹ç™ºç’°å¢ƒï¼ˆç¾åœ¨ã®ä¸»è¦ä½œæ¥­ç’°å¢ƒï¼‰
- **æŠ€è¡“**: Node.js + TypeScript
- **å½¹å‰²**: ã‚³ãƒ¼ãƒ‰é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ

### grpc-analyzer-node
- **ç”¨é€”**: æœ¬ç•ªå®Ÿé¨“ç”¨ç’°å¢ƒï¼ˆå¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå‡¦ç†ï¼‰
- **æŠ€è¡“**: Node.js + TypeScript
- **ç‰¹å¾´**: å…¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚’ãƒã‚¤ãƒ³ãƒ‰
- **å½¹å‰²**: æœ¬æ ¼çš„ãªAPRå®Ÿè¡Œ

### evaluation-system
- **ç”¨é€”**: APRè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°è¦è¿½åŠ ï¼‰
- **æŠ€è¡“**: Python
- **å½¹å‰²**: ã‚·ã‚¹ãƒ†ãƒ è©•ä¾¡ + ãƒ‘ãƒƒãƒå“è³ªè©•ä¾¡

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ç’°å¢ƒæ§‹ç¯‰

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œ
cd /app/.docker

# ã‚³ãƒ³ãƒ†ãƒŠãƒ“ãƒ«ãƒ‰
./manage.sh build

# ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
./manage.sh up
```

### 2. APRå®Ÿè¡Œ

```bash
# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§å®Ÿè¡Œ
./manage.sh run-apr-test

# æœ¬æ ¼ãƒ‡ãƒ¼ã‚¿ã§å®Ÿè¡Œ  
./manage.sh run-apr
```

### 3. è©•ä¾¡å®Ÿè¡Œ

```bash
# å…¨è©•ä¾¡å®Ÿè¡Œ
./manage.sh eval-all

# å€‹åˆ¥å®Ÿè¡Œ
./manage.sh eval-step1  # ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æº–æ‹ æ€§
./manage.sh eval-step2  # ãƒ‘ãƒƒãƒå“è³ª
```

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ï¼ˆãƒ›ã‚¹ãƒˆOS: F:\Workspace\gRPC_Analyzerï¼‰

```
F:\Workspace\gRPC_Analyzer\     # ãƒ›ã‚¹ãƒˆOS
â”œâ”€â”€ .docker/                    # Dockerè¨­å®š
â”‚   â”œâ”€â”€ docker-compose.yml      # ã‚µãƒ¼ãƒ“ã‚¹å®šç¾©
â”‚   â”œâ”€â”€ Dockerfile_*            # å„ç¨®Dockerfile
â”‚   â”œâ”€â”€ requirements_*.txt      # ä¾å­˜é–¢ä¿‚
â”‚   â””â”€â”€ manage.sh               # ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ src/                        # APRã‚·ã‚¹ãƒ†ãƒ ã‚½ãƒ¼ã‚¹
â”œâ”€â”€ evaluation/                 # è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã‚½ãƒ¼ã‚¹
â”‚   â””â”€â”€ main.py                 # è©•ä¾¡ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ dataset/                    # ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰
â”œâ”€â”€ log/                        # APRãƒ­ã‚°ï¼ˆAPRâ†’è©•ä¾¡ï¼‰
â”œâ”€â”€ output/                     # APRçµæœï¼ˆAPRâ†’è©•ä¾¡ï¼‰
â”œâ”€â”€ evaluation-results/         # è©•ä¾¡çµæœå°‚ç”¨
â””â”€â”€ evaluation-design/          # è©•ä¾¡è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

### ãƒœãƒªãƒ¥ãƒ¼ãƒ ãƒãƒƒãƒ”ãƒ³ã‚°

**grpc-analyzer-nodeï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰:**
- `F:\Workspace\gRPC_Analyzer\dataset\*` â†’ `/app/dataset/*`
- å…¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã‚’å€‹åˆ¥ãƒã‚¤ãƒ³ãƒ‰

**evaluation-systemï¼ˆè©•ä¾¡ç’°å¢ƒï¼‰:**
- `F:\Workspace\gRPC_Analyzer\dataset` â†’ `/app/dataset` (èª­ã¿å–ã‚Šå°‚ç”¨)
- `F:\Workspace\gRPC_Analyzer\log` â†’ `/app/log` (èª­ã¿å–ã‚Šå°‚ç”¨)
- `F:\Workspace\gRPC_Analyzer\output` â†’ `/app/output` (èª­ã¿å–ã‚Šå°‚ç”¨)
- `F:\Workspace\gRPC_Analyzer\evaluation-results` â†’ `/app/evaluation-results`

## ğŸ³ ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆ

### apr-system
- **ç”¨é€”**: gRPC Analyzerï¼ˆæ—¢å­˜APRã‚·ã‚¹ãƒ†ãƒ ï¼‰
- **æŠ€è¡“**: Node.js + TypeScript
- **å½¹å‰²**: LLMãƒ™ãƒ¼ã‚¹ã®è‡ªå‹•ãƒ—ãƒ­ã‚°ãƒ©ãƒ ä¿®å¾©

### evaluation-system  
- **ç”¨é€”**: APRè©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆæ–°è¦ï¼‰
- **æŠ€è¡“**: Python
- **å½¹å‰²**: ã‚·ã‚¹ãƒ†ãƒ è©•ä¾¡ + ãƒ‘ãƒƒãƒå“è³ªè©•ä¾¡

### dev
- **ç”¨é€”**: é–‹ç™ºç’°å¢ƒ
- **æŠ€è¡“**: Node.js
- **å½¹å‰²**: é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ç”¨

## ğŸ“Š è©•ä¾¡ãƒ•ãƒ­ãƒ¼

### Phase 1: APRå®Ÿè¡Œ
```bash
./manage.sh run-apr
```
- dataset/filtered_commit ã‚’å‡¦ç†
- log/ ã«ãƒ­ã‚°å‡ºåŠ›
- output/ ã«çµæœå‡ºåŠ›

### Phase 2: è©•ä¾¡å®Ÿè¡Œ
```bash
./manage.sh eval-all
```

**ã‚¹ãƒ†ãƒƒãƒ—1**: ã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜æº–æ‹ æ€§è©•ä¾¡
- åˆ¶å¾¡ãƒ•ãƒ­ãƒ¼æº–æ‹ æ€§
- ãƒ‘ãƒ¼ã‚µãƒ¼ç²¾åº¦  
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**ã‚¹ãƒ†ãƒƒãƒ—2**: ãƒ‘ãƒƒãƒå“è³ªè©•ä¾¡
- Plausibilityï¼ˆé©ç”¨å¯èƒ½æ€§ï¼‰
- Correctnessï¼ˆæ­£ç¢ºæ€§: R1-R10ï¼‰
- Reasoning Qualityï¼ˆæ¨è«–å“è³ªï¼‰

**æœ€çµ‚**: çµ±åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- ç·åˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- æ”¹å–„æ¨å¥¨äº‹é …

## ğŸ› ï¸ ç®¡ç†ã‚³ãƒãƒ³ãƒ‰

### åŸºæœ¬æ“ä½œ
```bash
./manage.sh build          # ã‚³ãƒ³ãƒ†ãƒŠãƒ“ãƒ«ãƒ‰
./manage.sh up             # ã‚µãƒ¼ãƒ“ã‚¹èµ·å‹•
./manage.sh down           # ã‚µãƒ¼ãƒ“ã‚¹åœæ­¢
./manage.sh status         # çŠ¶æ…‹ç¢ºèª
```

### APRæ“ä½œ
```bash
./manage.sh run-apr        # grpc-analyzer-nodeã§æœ¬æ ¼ãƒãƒƒãƒå‡¦ç†
./manage.sh run-apr-test   # grpc-analyzer-nodeã§ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿å‡¦ç†
```

### é–‹ç™ºæ“ä½œ  
```bash
./manage.sh shell dev                # é–‹ç™ºç’°å¢ƒã‚·ã‚§ãƒ«
./manage.sh shell grpc-analyzer-node # æœ¬ç•ªç’°å¢ƒã‚·ã‚§ãƒ«
```

### è©•ä¾¡æ“ä½œ
```bash
./manage.sh eval-all       # å…¨è©•ä¾¡å®Ÿè¡Œ
./manage.sh eval-step1     # ä»•æ§˜æº–æ‹ æ€§è©•ä¾¡ã®ã¿
./manage.sh eval-step2     # ãƒ‘ãƒƒãƒå“è³ªè©•ä¾¡ã®ã¿
./manage.sh eval-dry-run   # ç’°å¢ƒãƒã‚§ãƒƒã‚¯
```

### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```bash
./manage.sh shell evaluation-system  # è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ã‚·ã‚§ãƒ«
./manage.sh shell dev                # é–‹ç™ºç’°å¢ƒã‚·ã‚§ãƒ«
./manage.sh shell grpc-analyzer-node # æœ¬ç•ªç’°å¢ƒã‚·ã‚§ãƒ«
./manage.sh logs grpc-analyzer-node  # æœ¬ç•ªAPRãƒ­ã‚°è¡¨ç¤º
./manage.sh clean                    # ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
./manage.sh reset                    # ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆï¼ˆæ³¨æ„ï¼‰
```

## ğŸ”§ è¨­å®š

### ç’°å¢ƒå¤‰æ•°
APRã‚·ã‚¹ãƒ†ãƒ ç”¨:
```bash
OPENAI_TOKEN=your_openai_token
NODE_ENV=production
```

è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ ç”¨:
```bash
PYTHONPATH=/app
EVALUATION_MODE=production
```

### ãƒœãƒªãƒ¥ãƒ¼ãƒ è¨­å®š
- `dataset/`: èª­ã¿å–ã‚Šå°‚ç”¨ãƒã‚¤ãƒ³ãƒ‰
- `log/`: APRãŒæ›¸ãè¾¼ã¿ã€è©•ä¾¡ãŒèª­ã¿å–ã‚Š
- `output/`: APRãŒæ›¸ãè¾¼ã¿ã€è©•ä¾¡ãŒèª­ã¿å–ã‚Š  
- `evaluation-results/`: è©•ä¾¡å°‚ç”¨æ›¸ãè¾¼ã¿

## ğŸ“ˆ çµæœç¢ºèª

### APRçµæœ
```
F:\Workspace\gRPC_Analyzer\output\
â”œâ”€â”€ processing_summary_*.json    # å‡¦ç†ã‚µãƒãƒªãƒ¼
â”œâ”€â”€ error_report_*.json          # ã‚¨ãƒ©ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆ
â””â”€â”€ backups/                     # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```

### è©•ä¾¡çµæœ
```
F:\Workspace\gRPC_Analyzer\evaluation-results\
â”œâ”€â”€ step1/                       # ä»•æ§˜æº–æ‹ æ€§è©•ä¾¡
â”‚   â””â”€â”€ compliance_evaluation_*.json
â”œâ”€â”€ step2/                       # ãƒ‘ãƒƒãƒå“è³ªè©•ä¾¡
â”‚   â””â”€â”€ quality_evaluation_*.json
â””â”€â”€ comprehensive_report_*.json  # çµ±åˆãƒ¬ãƒãƒ¼ãƒˆ
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ãƒãƒ¼ãƒˆç«¶åˆ**
   ```bash
   ./manage.sh down
   ./manage.sh clean
   ```

2. **ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ä¸è¶³**
   ```bash
   docker system prune -a
   ```

3. **æ¨©é™ã‚¨ãƒ©ãƒ¼**
   ```bash
   sudo chown -R $USER:$USER /app/evaluation-results
   ```

### ãƒ­ã‚°ç¢ºèª
```bash
# APRãƒ­ã‚°
./manage.sh logs apr-system

# è©•ä¾¡ãƒ­ã‚°
./manage.sh logs evaluation-system

# å…¨ãƒ­ã‚°
./manage.sh logs
```

## ğŸ”„ ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ä¾‹

å®Œå…¨ãªè©•ä¾¡å®Ÿè¡Œä¾‹:
```bash
# 1. ç’°å¢ƒæº–å‚™
./manage.sh build
./manage.sh up

# 2. APRå®Ÿè¡Œï¼ˆgrpc-analyzer-nodeã§ç´„3æ™‚é–“ï¼‰
./manage.sh run-apr

# 3. è©•ä¾¡å®Ÿè¡Œï¼ˆç´„30åˆ†ï¼‰
./manage.sh eval-all

# 4. çµæœç¢ºèª
ls -la F:/Workspace/gRPC_Analyzer/evaluation-results/

# 5. ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
./manage.sh down
```
